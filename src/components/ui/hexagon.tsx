"use client";

import { useEffect, useRef } from "react";
import { gsap } from "gsap";

interface HexagonProps {
  size?: "large" | "small";
  animate?: boolean;
}

export default function Hexagon({
  size = "small",
  animate = false,
}: HexagonProps) {
  const hexRef = useRef<SVGSVGElement>(null);

  useEffect(() => {
    if (hexRef.current) {
      const scale = size === "large" ? 1 : 0.5;
      let move = 0;

      const screenSize = window.innerWidth;
      if (size !== "large") {
        if (screenSize < 640) {
          move = -25;
        } else if (screenSize < 1024) {
          move = -50;
        } else {
          move = -70;
        }
      }



      gsap.to(hexRef.current, {
        scale,
        y: move,
        duration: 0.6,
        ease: "circ.inOut",
        transformOrigin: "50% 50%",
        overwrite: "auto",
      });
    }
  }, [size]);

  useEffect(() => {
    if (animate && hexRef.current) {
      const tl = gsap.timeline({
        repeat: -1,
        defaults: { duration: 2, ease: "expo.inOut" },
      });
      tl.to(hexRef.current, { rotateZ: "+=60" });
      tl.to(hexRef.current, { rotateZ: "+=60" });
      tl.to(hexRef.current, { rotateZ: "+=60" });
      tl.to(hexRef.current, { rotateZ: "+=60" });
      tl.to(hexRef.current, { rotateZ: "+=60" });
      tl.to(hexRef.current, { rotateZ: "+=60" });
    }
  }, [animate]);

  return (
    <svg ref={hexRef} viewBox="-350 -350 700 700" className="hexagon">
      <defs>
        <clipPath id="hexClip">
          <path
            d="M-289.04400634765625,-0.054999999701976776 C-289.0450134277344,-34.21799850463867 -289.135986328125,-68.38200378417969 -289.0069885253906,-102.54399871826172 C-288.9410095214844,-120.22699737548828 -285.6919860839844,-137.22900390625 -277.6050109863281,-153.1959991455078 C-267.74200439453125,-172.6739959716797 -253.13800048828125,-187.59100341796875 -234.41099548339844,-198.4429931640625 C-174.48199462890625,-233.17300415039062 -114.60600280761719,-268.0010070800781 -54.415000915527344,-302.2720031738281 C-18.350000381469727,-322.8059997558594 18.45199966430664,-322.64898681640625 54.486000061035156,-302.1050109863281 C114.51499938964844,-267.8789978027344 174.2830047607422,-233.1959991455078 234.05299377441406,-198.51699829101562 C260.843994140625,-182.97300720214844 278.5190124511719,-160.13999938964844 285.7569885253906,-129.906005859375 C287.8689880371094,-121.08200073242188 288.77099609375,-111.77100372314453 288.8030090332031,-102.677001953125 C289.0480041503906,-34.185001373291016 289.22900390625,34.310001373291016 288.8280029296875,102.8010025024414 C288.5830078125,144.7790069580078 270.3110046386719,177.27000427246094 233.92100524902344,198.53599548339844 C174.406005859375,233.31500244140625 114.69000244140625,267.7539978027344 54.82699966430664,301.92999267578125 C18.26099967956543,322.8059997558594 -18.878000259399414,322.6619873046875 -55.40999984741211,301.7690124511719 C-114.95600128173828,267.7139892578125 -174.27200317382812,233.25799560546875 -233.64500427246094,198.9029998779297 C-260.9599914550781,183.0970001220703 -278.97198486328125,160.01499938964844 -286.17498779296875,129.18800354003906 C-288.23699951171875,120.36199951171875 -288.8380126953125,111.03900146484375 -288.9200134277344,101.93299865722656 C-289.2279968261719,67.93900299072266 -289.0429992675781,33.941001892089844 -289.04400634765625,-0.054999999701976776z"
            fill="white"
            stroke="none"
          />
        </clipPath>
      </defs>
      <image
        href="beauty.png"
        width="650"
        height="650"
        clipPath="url(#hexClip)"
        preserveAspectRatio="xMidYMid cover"
        x={-325}
        y={-325}
      />
    </svg>
  );
}
